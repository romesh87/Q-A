(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{15:function(e,t,a){e.exports={answer:"Answer_answer__6LX61",user:"Answer_user__GAatl",content:"Answer_content__2Skt6",upvotes:"Answer_upvotes__2KD37",buttons:"Answer_buttons__11wGn",btnFavourite:"Answer_btnFavourite__1YBAP",btnUnfavourite:"Answer_btnUnfavourite__306s9",btnDelete:"Answer_btnDelete__Us0O5",btnEdit:"Answer_btnEdit__3PP8J"}},20:function(e,t,a){e.exports={navBar:"NavBar_navBar__36P4w",logo:"NavBar_logo__3hXp8",navLinks:"NavBar_navLinks__38QZs",searchBar:"NavBar_searchBar__LX2gJ",username:"NavBar_username__o4ueQ"}},22:function(e,t,a){e.exports={questionItem:"QuestionItem_questionItem__yheNY",user:"QuestionItem_user__3fTwX",content:"QuestionItem_content__3HYQ8",buttons:"QuestionItem_buttons__1tb25",btnDelete:"QuestionItem_btnDelete__1zJoC"}},24:function(e,t,a){e.exports={editForm:"EditForm_editForm__3KHOf",buttons:"EditForm_buttons__2QzTY",btnCancel:"EditForm_btnCancel__1MRYV",btnSubmit:"EditForm_btnSubmit__2ykdx"}},27:function(e,t,a){e.exports={question:"Question_question__2oG9X",user:"Question_user__1i8Pu",content:"Question_content__1o1QR"}},28:function(e,t,a){e.exports={alert:"Alert_alert__1rkHi",danger:"Alert_danger__3z4Hs",success:"Alert_success__2FJwX"}},33:function(e,t,a){e.exports={profile:"Profile_profile__3dzvr"}},53:function(e,t,a){e.exports={questions:"Questions_questions__1uqWV"}},54:function(e,t,a){e.exports={questionForm:"QuestionForm_questionForm__5NRNW"}},55:function(e,t,a){e.exports={loader:"Spinner_loader__fTuX5",load3:"Spinner_load3__3VkKK"}},56:function(e,t,a){e.exports={pagination:"Pagination_pagination__2plzt"}},57:function(e,t,a){e.exports={backdrop:"Backdrop_backdrop__3aIp6"}},58:function(e,t,a){e.exports={answerForm:"AnswerForm_answerForm__1wxGP"}},59:function(e,t,a){e.exports={signup:"SignUp_signup__2lrMR"}},60:function(e,t,a){e.exports={login:"LogIn_login__1Vf25"}},61:function(e,t,a){e.exports={forgotPassword:"ForgotPassword_forgotPassword__1KccJ"}},62:function(e,t,a){e.exports={resetPassword:"ResetPassword_resetPassword__2MLAY"}},63:function(e,t,a){e.exports=a(96)},72:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),o=a.n(s),c=a(8),u=a(19),i=a(3),l=a(18),p=a(48),m=a(49),d=a(34),f=a(2),E={questions:[],questionsCount:null,searchText:null,question:null,loading:!0,editing:null,error:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_QUESTIONS":return Object(f.a)({},e,{questionsCount:t.payload.count,searchText:t.payload.searchText,questions:t.payload.results,loading:!1});case"GET_QUESTION":return Object(f.a)({},e,{question:t.payload,loading:!1});case"ADD_QUESTION":return Object(f.a)({},e,{questions:[t.payload].concat(Object(d.a)(e.questions))});case"DELETE_QUESTION":return Object(f.a)({},e,{questions:e.questions.filter((function(e){return e._id!==t.payload}))});case"SET_EDITING":return Object(f.a)({},e,{editing:t.payload});case"CLEAR_EDITING":return Object(f.a)({},e,{editing:null});case"UPDATE_UPVOTES":return Object(f.a)({},e,{question:Object(f.a)({},e.question,{answers:e.question.answers.map((function(e){return e._id===t.payload.id?Object(f.a)({},e,{upvotes:t.payload.upvotes}):e}))})});case"UPDATE_FAVOURITE":return Object(f.a)({},e,{question:Object(f.a)({},e.question,{answers:e.question.answers.map((function(e){return e._id===t.payload.id?Object(f.a)({},e,{isFavourite:t.payload.isFavourite}):e}))})});case"ADD_ANSWER":return Object(f.a)({},e,{question:Object(f.a)({},e.question,{answers:[t.payload].concat(Object(d.a)(e.question.answers))})});case"UPDATE_ANSWER":return Object(f.a)({},e,{question:Object(f.a)({},e.question,{answers:e.question.answers.map((function(e){return e._id===t.payload.id?Object(f.a)({},e,{text:t.payload.text}):e}))})});case"DELETE_ANSWER":return Object(f.a)({},e,{question:Object(f.a)({},e.question,{answers:e.question.answers.filter((function(e){return e._id!==t.payload}))})});case"QUESTION_ERROR":return Object(f.a)({},e,{loading:!1,error:t.payload});default:return e}},b={user:null,token:null,isAuthenticated:!1,loading:!0},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload),Object(f.a)({},e,{token:t.payload,isAuthenticated:!0,loading:!1});case"LOAD_USER":return Object(f.a)({},e,{token:localStorage.getItem("token"),isAuthenticated:!0,user:t.payload,loading:!1});case"UPDATE_USER":return Object(f.a)({},e,{user:t.payload});case"SIGNUP_FAIL":case"LOGIN_FAIL":case"AUTH_FAIL":case"LOGOUT":return localStorage.removeItem("token"),Object(f.a)({},e,{user:null,token:null,isAuthenticated:!1,loading:!1});default:return e}},g=[],_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALERT":return e.concat(t.payload);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==t.payload}));default:return e}},w=Object(l.combineReducers)({question:v,auth:h,alert:_}),O=[m.a],y=Object(l.createStore)(w,{},Object(p.composeWithDevTools)(l.applyMiddleware.apply(void 0,O))),x=(a(72),a(1)),j=a.n(x),N=a(6),S=a(5),A=a.n(S),k=a(50),q=a.n(k),T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=q.a.v4();n({type:"SET_ALERT",payload:{id:r,text:e,type:t}}),setTimeout((function(){n({type:"REMOVE_ALERT",payload:r})}),a)}},I=function(e){e?A.a.defaults.headers.common["x-auth-token"]=e:delete A.a.defaults.headers.common["x-auth-token"]},U=function(){return function(){var e=Object(N.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(localStorage.getItem("token")),e.prev=1,e.next=4,A.a.get("/api/users");case 4:a=e.sent,t({type:"LOAD_USER",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"AUTH_FAIL",payload:e.t0.response});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},R=a(51),C=Object(i.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(R.a)(e,["component","auth"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/login"})}}))})),P=a(7),D=a(20),F=a.n(D),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(){var n=Object(N.a)(j.a.mark((function n(r){var s,o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s="/api/questions",(e||t||a)&&(s+="?"),e&&(s+="page=".concat(e,"&")),t&&(s+="itemsperpage=".concat(t,"&")),a&&(s+="text=".concat(a,"&")),n.prev=5,n.next=8,A.a.get(s);case 8:o=n.sent,r({type:"GET_QUESTIONS",payload:{count:o.data.count,results:o.data.results,searchText:a}}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),r({type:"QUESTION_ERROR",payload:n.t0.response});case 15:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(e){return n.apply(this,arguments)}}()},L=Object(i.b)((function(e){return{auth:e.auth}}),{logOut:function(){return function(){var e=Object(N.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getQuestions:Q})((function(e){var t=e.auth.isAuthenticated,a=e.auth.user,s=Object(n.useState)(""),o=Object(P.a)(s,2),u=o[0],i=o[1];return r.a.createElement("nav",{className:F.a.navBar},r.a.createElement(c.b,{to:"/"},r.a.createElement("img",{className:F.a.logo,src:"/img/logos/q-and-a-1.png",alt:"logo"})),r.a.createElement("form",{className:F.a.searchBar,onSubmit:function(t){return function(t){t.preventDefault(),""!==u&&e.getQuestions(null,null,u)}(t)}},r.a.createElement("input",{type:"search",placeholder:" Search..",value:u,onChange:function(e){return i(e.target.value)}})),t?r.a.createElement("div",{className:F.a.navLinks},a&&r.a.createElement("img",{src:"/img/users/".concat(a.avatar),alt:"user-img"}),a&&r.a.createElement(c.b,{to:"/profile",className:F.a.username}," ",a.name.split(" ")[0]),r.a.createElement("a",{href:"#!",onClick:function(){e.logOut(),console.log(e.history)}},"LOG OUT")):r.a.createElement("div",{className:F.a.navLinks},r.a.createElement(c.b,{to:"/login"},"LOG IN"),r.a.createElement(c.b,{to:"/signup"},"SIGN UP")))})),G=a(53),Y=a.n(G),B=a(21),M=a.n(B),V=a(22),W=a.n(V),H=Object(i.b)((function(e){return{auth:e.auth}}),{deleteQuestion:function(e){return function(){var t=Object(N.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.delete("/api/questions/".concat(e));case 3:a({type:"DELETE_QUESTION",payload:e}),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),t.t0.response.data.errors.forEach((function(e){return a(T(e.msg,"danger"))})),a({type:"QUESTION_ERROR",payload:t.t0.response});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.auth;return r.a.createElement("div",{className:W.a.questionItem},r.a.createElement("div",{className:W.a.user},r.a.createElement("img",{src:"/img/users/".concat(e.user.avatar),alt:"avatar"}),r.a.createElement("h3",null,e.user.name)),r.a.createElement("div",{className:W.a.content},r.a.createElement("h1",null,e.text),r.a.createElement("div",null,r.a.createElement("h3",null,"Asked on: ",r.a.createElement(M.a,{format:"YYYY/MM/DD"},e.date)),r.a.createElement("div",{className:W.a.buttons},r.a.createElement(c.b,{to:"/questions/".concat(e.id)},"Answers: ",e.answers.length),t.user?t.user._id===e.userId&&r.a.createElement("button",{className:W.a.btnDelete},r.a.createElement("i",{className:"material-icons",onClick:function(){e.deleteQuestion(e.id)}},"close")):null))))})),J=a(54),X=a.n(J),z=Object(i.b)(null,{addQuestion:function(e){return function(){var t=Object(N.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e),t.next=4,A.a.post("/api/questions",{text:e});case 4:n=t.sent,a({type:"ADD_QUESTION",payload:n.data}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response.data.errors.forEach((function(e){return a(T(e.msg,"danger"))})),a({type:"QUESTION_ERROR",payload:t.t0.response});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(""),a=Object(P.a)(t,2),s=a[0],o=a[1];return r.a.createElement("form",{className:X.a.questionForm,onSubmit:function(t){return function(t){t.preventDefault(),e.addQuestion(s)}(t)}},r.a.createElement("textarea",{placeholder:"Ask a question..",value:s,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{type:"submit",disabled:""===s},"Submit"))})),K=a(55),Z=a.n(K),$=function(){return r.a.createElement("div",{className:Z.a.loader},"Loading...")},ee=a(56),te=a.n(ee),ae=function(e){for(var t=Math.floor(e.resultsCount/e.itemsPerPage),a=[],n=1;n<=t;n++)a.push(n);return r.a.createElement("nav",{className:te.a.pagination},r.a.createElement("ul",null,a.map((function(t){return r.a.createElement("li",{key:t,onClick:function(t){return e.onClickHandler(t)},style:{backgroundColor:+e.currentPage===t?"#bdc3c7":"white",color:+e.currentPage===t?"white":"black"}},t)}))))},ne=Object(i.b)((function(e){return{question:e.question,auth:e.auth}}),{getQuestions:Q})((function(e){var t=e.question.questions,a=e.auth,s=Object(n.useState)(""),o=Object(P.a)(s,2),c=o[0],u=o[1];Object(n.useEffect)((function(){e.getQuestions(1,10),u("1")}),[]);return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:Y.a.questions},a.isAuthenticated&&r.a.createElement(z,null),e.question.loading?r.a.createElement($,null):t.map((function(e){return r.a.createElement(H,{key:e._id,id:e._id,user:e.user,userId:e.user._id,text:e.text,date:e.date,answers:e.answers})}))),r.a.createElement(ae,{resultsCount:e.question.questionsCount,itemsPerPage:10,currentPage:c,onClickHandler:function(t){e.getQuestions(t.target.textContent,10,e.question.searchText),u(t.target.textContent),window.scrollTo({top:0,left:0})}}))})),re=a(27),se=a.n(re),oe=a(15),ce=a.n(oe),ue=a(24),ie=a.n(ue),le=a(57),pe=a.n(le),me=function(e){return r.a.createElement("div",{className:pe.a.backdrop,style:{display:e.show?"block":"none"}})},de=Object(i.b)((function(e){return{question:e.question}}),{clearEditing:function(){return function(){var e=Object(N.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"CLEAR_EDITING"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateAnswer:function(e,t,a){return function(){var n=Object(N.a)(j.a.mark((function n(r){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,A.a.patch("/api/questions/".concat(e,"/answer/").concat(t),{text:a});case 3:r({type:"UPDATE_ANSWER",payload:{id:t,text:a}}),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),n.t0.response.data.errors.forEach((function(e){return r(T(e.msg,"danger"))})),r({type:"QUESTION_ERROR",payload:n.t0.response});case 10:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.question.editing,a=e.question.question,s=Object(n.useState)(e.text),o=Object(P.a)(s,2),c=o[0],u=o[1];return r.a.createElement(n.Fragment,null,r.a.createElement(me,{show:null!==t}),r.a.createElement("form",{className:ie.a.editForm,style:{transform:t?"translateY(-500px)":"translateY(-500vh)"},onSubmit:function(t){return function(t){t.preventDefault(),e.updateAnswer(a._id,e.ansId,c),e.clearEditing()}(t)}},r.a.createElement("textarea",{value:c,onChange:function(e){return u(e.target.value)}}),r.a.createElement("div",{className:ie.a.buttons},r.a.createElement("button",{className:ie.a.btnCancel,onClick:function(){e.clearEditing()}},"Cancel"),r.a.createElement("button",{type:"submit",className:ie.a.btnSubmit,disabled:""===c||c===e.text},"Submit"))))})),fe=Object(i.b)((function(e){return{auth:e.auth,question:e.question}}),{upvoteAnswer:function(e,t){return function(){var a=Object(N.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,A.a.put("/api/questions/".concat(e,"/answer/").concat(t,"/upvote"));case 3:r=a.sent,n({type:"UPDATE_UPVOTES",payload:{id:t,upvotes:r.data}}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),a.t0.response.data.errors.forEach((function(e){return n(T(e.msg,"danger"))})),n({type:"QUESTION_ERROR",payload:a.t0.response});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},downvoteAnswer:function(e,t){return function(){var a=Object(N.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,A.a.put("/api/questions/".concat(e,"/answer/").concat(t,"/downvote"));case 3:r=a.sent,n({type:"UPDATE_UPVOTES",payload:{id:t,upvotes:r.data}}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),a.t0.response.data.errors.forEach((function(e){return n(T(e.msg,"danger"))})),n({type:"QUESTION_ERROR",payload:a.t0.response});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},favouriteAnswer:function(e,t){return function(){var a=Object(N.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,A.a.put("/api/questions/".concat(e,"/answer/").concat(t,"/favourite"));case 3:r=a.sent,n({type:"UPDATE_FAVOURITE",payload:{id:t,isFavourite:r.data}}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),a.t0.response.data.errors.forEach((function(e){return n(T(e.msg,"danger"))})),n({type:"QUESTION_ERROR",payload:a.t0.response});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},unfavouriteAnswer:function(e,t){return function(){var a=Object(N.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,A.a.put("/api/questions/".concat(e,"/answer/").concat(t,"/unfavourite"));case 3:r=a.sent,n({type:"UPDATE_FAVOURITE",payload:{id:t,isFavourite:r.data}}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),a.t0.response.data.errors.forEach((function(e){return n(T(e.msg,"danger"))})),n({type:"QUESTION_ERROR",payload:a.t0.response});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},deleteAnswer:function(e,t){return function(){var a=Object(N.a)(j.a.mark((function a(n){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,A.a.delete("/api/questions/".concat(e,"/answer/").concat(t));case 3:n({type:"DELETE_ANSWER",payload:t}),a.next=10;break;case 6:a.prev=6,a.t0=a.catch(0),a.t0.response.data.errors.forEach((function(e){return n(T(e.msg,"danger"))})),n({type:"QUESTION_ERROR",payload:a.t0.response});case 10:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e){return a.apply(this,arguments)}}()},setEditing:function(e){return function(){var t=Object(N.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SET_EDITING",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.question.question,a=e.auth,s=e.question.editing;return r.a.createElement(n.Fragment,null,s===e.id&&r.a.createElement(de,{text:e.text,ansId:e.id}),r.a.createElement("div",{className:ce.a.answer,style:e.isFavourite?{backgroundColor:"#d8f5e4"}:{backgroundColor:"#ecf0f1"}},r.a.createElement("div",{className:ce.a.user},r.a.createElement("img",{src:"/img/users/".concat(e.avatar),alt:"avatar"}),r.a.createElement("h3",null,e.username)),r.a.createElement("div",{className:ce.a.content},r.a.createElement("p",null,e.text),r.a.createElement("div",null,r.a.createElement("h3",null,"Answered on: ",r.a.createElement(M.a,{format:"YYYY/MM/DD"},e.date)),r.a.createElement("div",{className:ce.a.buttons},a.user._id===t.user._id&&r.a.createElement("button",{className:e.isFavourite?ce.a.btnUnfavourite:ce.a.btnFavourite,onClick:function(){e.isFavourite?e.unfavouriteAnswer(t._id,e.id):e.favouriteAnswer(t._id,e.id)}},r.a.createElement("span",null,e.isFavourite?"Unmark favourite":"Mark favourite")),a.user._id===e.userId&&r.a.createElement("div",{className:ce.a.buttons},r.a.createElement("button",{className:ce.a.btnEdit,onClick:function(){e.setEditing(e.id)}},"Edit"),r.a.createElement("button",{className:ce.a.btnDelete},r.a.createElement("i",{className:"material-icons",onClick:function(){e.deleteAnswer(t._id,e.id)}},"close")))))),r.a.createElement("div",{className:ce.a.upvotes},r.a.createElement("h4",null,"Upvotes"),r.a.createElement("i",{className:"material-icons md-48",onClick:function(){e.upvoteAnswer(t._id,e.id)}},"expand_less"),r.a.createElement("p",null,e.upvotes.length),r.a.createElement("i",{className:"material-icons md-48",onClick:function(){e.downvoteAnswer(t._id,e.id)}},"expand_more"),e.isFavourite&&r.a.createElement("i",{className:"material-icons md-48",style:{color:"#27ae60"}},"check"))))})),Ee=a(58),ve=a.n(Ee),be=Object(i.b)((function(e){return{question:e.question}}),{addAnswer:function(e,t){return function(){var a=Object(N.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,A.a.post("/api/questions/".concat(e,"/answer"),{text:t});case 3:r=a.sent,n({type:"ADD_ANSWER",payload:r.data}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),a.t0.response.data.errors.forEach((function(e){return n(T(e.msg,"danger"))})),n({type:"QUESTION_ERROR",payload:a.t0.response});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.question.question,a=Object(n.useState)(""),s=Object(P.a)(a,2),o=s[0],c=s[1];return r.a.createElement("form",{className:ve.a.answerForm,onSubmit:function(a){return function(a){a.preventDefault(),e.addAnswer(t._id,o)}(a)}},r.a.createElement("textarea",{placeholder:"Answer question..",value:o,onChange:function(e){return c(e.target.value)}}),r.a.createElement("button",{type:"submit",disabled:""===o},"Submit"))})),he=Object(i.b)((function(e){return{question:e.question,auth:e.auth}}),{getQuestion:function(e){return function(){var t=Object(N.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.get("/api/questions/".concat(e));case 3:n=t.sent,a({type:"GET_QUESTION",payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"QUESTION_ERROR",payload:t.t0.response});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.question.loading,a=e.question.question,s=e.auth.isAuthenticated;return Object(n.useEffect)((function(){e.getQuestion(e.match.params.id)}),[]),s?t||null===a||a._id!==e.match.params.id?r.a.createElement($,null):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:se.a.question},r.a.createElement("div",{className:se.a.user},r.a.createElement("img",{src:"/img/users/".concat(a.user.avatar),alt:"avatar"}),r.a.createElement("h3",null,a.user.name)),r.a.createElement("div",{className:se.a.content},r.a.createElement("h1",null,a.text),r.a.createElement("div",null,r.a.createElement("h3",null,"Asked on: ",r.a.createElement(M.a,{format:"YYYY/MM/DD"},a.date)),r.a.createElement("h4",null,"Answers: ",a.answers.length)))),r.a.createElement(be,null),a.answers.length>0?a.answers.map((function(e){return r.a.createElement(fe,{key:e._id,id:e._id,username:e.user.name,userId:e.user._id,avatar:e.user.avatar,text:e.text,date:e.date,upvotes:e.upvotes,isFavourite:e.isFavourite})})):r.a.createElement("p",{style:{textAlign:"center",marginTop:"20px"}},"No answers yet")):r.a.createElement(u.a,{to:"/login"})})),ge=a(9),_e=a(59),we=a.n(_e),Oe=Object(i.b)((function(e){return{auth:e.auth}}),{signUp:function(e,t,a){return function(){var n=Object(N.a)(j.a.mark((function n(r){var s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,A.a.post("api/users/signup",{name:e,email:t,password:a});case 3:s=n.sent,r({type:"SIGNUP_SUCCESS",payload:s.data.token}),U(),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),n.t0.response.data.errors.forEach((function(e){return r(T(e.msg,"danger"))})),r({type:"SIGNUP_FAIL",payload:n.t0.response});case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)({name:"",email:"",password1:"",password2:""}),a=Object(P.a)(t,2),s=a[0],o=a[1],i=s.name,l=s.email,p=s.password1,m=s.password2;return e.auth.isAuthenticated?r.a.createElement(u.a,{to:"/"}):r.a.createElement("div",{className:we.a.signup},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:function(t){return function(t){if(t.preventDefault(),p!==m)return window.alert("Password doesn't match!");e.signUp(i,l,p)}(t)}},r.a.createElement("input",{type:"text",name:"name",value:s.name,placeholder:" Name",onChange:function(e){return o(Object(f.a)({},s,Object(ge.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{type:"email",name:"email",value:s.email,placeholder:" Email",onChange:function(e){return o(Object(f.a)({},s,Object(ge.a)({},e.target.name,e.target.value)))}}),r.a.createElement("small",null,"*This website uses Gravatar "),r.a.createElement("input",{type:"password",name:"password1",value:s.password1,placeholder:" Password",onChange:function(e){return o(Object(f.a)({},s,Object(ge.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{type:"password",name:"password2",value:s.password2,placeholder:" Confirm Password",onChange:function(e){return o(Object(f.a)({},s,Object(ge.a)({},e.target.name,e.target.value)))}}),r.a.createElement("button",{type:"submit"},"Sign Up")),r.a.createElement("p",null,"Already registered? ",r.a.createElement(c.b,{to:"/login"}," Log In")))})),ye=a(60),xe=a.n(ye),je=Object(i.b)((function(e){return{auth:e.auth}}),{logIn:function(e,t){return function(){var a=Object(N.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,A.a.post("api/users/login",{email:e,password:t});case 3:r=a.sent,n({type:"LOGIN_SUCCESS",payload:r.data.token}),n(U()),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),a.t0.response.data.errors.forEach((function(e){return n(T(e.msg,"danger"))})),n({type:"LOGIN_FAIL",payload:a.t0.response});case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(P.a)(t,2),s=a[0],o=a[1],i=s.email,l=s.password;return e.auth.isAuthenticated?r.a.createElement(u.a,{to:"/"}):r.a.createElement("div",{className:xe.a.login},r.a.createElement("h1",null,"Log In"),r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault(),e.logIn(i,l)}(t)}},r.a.createElement("input",{type:"email",name:"email",value:s.email,placeholder:"Email",onChange:function(e){return o(Object(f.a)({},s,Object(ge.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{type:"password",name:"password",value:s.password,placeholder:"Password",onChange:function(e){return o(Object(f.a)({},s,Object(ge.a)({},e.target.name,e.target.value)))}}),r.a.createElement("button",{type:"submit"},"Log In")),r.a.createElement("p",null,"Not yet registered? ",r.a.createElement(c.b,{to:"/signup"}," Sign Up")),r.a.createElement("p",null,"Forgot your password? ",r.a.createElement(c.b,{to:"/forgotPassword"}," Click here")))})),Ne=a(28),Se=a.n(Ne),Ae=Object(i.b)((function(e){return{alert:e.alert}}))((function(e){return null!==e.alert&&e.alert.length>0?e.alert.map((function(e){var t=Se.a.alert;return"success"===e.type?t=t+" "+Se.a.success:"danger"===e.type&&(t=t+" "+Se.a.danger),r.a.createElement("div",{key:e.id,className:t},r.a.createElement("p",null,e.text))})):null})),ke=a(61),qe=a.n(ke),Te=Object(i.b)((function(e){return{auth:e.auth}}),{setAlert:T})((function(e){var t=Object(n.useState)({email:""}),a=Object(P.a)(t,2),s=a[0],o=a[1],c=s.email,i=function(){var t=Object(N.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,A.a.post("http://localhost:3000/api/users/forgotPassword",{email:c});case 4:e.setAlert("Email sent to ".concat(c),"success"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.setAlert(t.t0.response.data.msg,"danger");case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();return e.auth.isAuthenticated?r.a.createElement(u.a,{to:"/"}):r.a.createElement("div",{className:qe.a.forgotPassword},r.a.createElement("h1",null,"Enter your email"),r.a.createElement("form",{onSubmit:function(e){return i(e)}},r.a.createElement("input",{type:"email",name:"email",value:s.email,placeholder:"Email",onChange:function(e){return o(Object(f.a)({},s,Object(ge.a)({},e.target.name,e.target.value)))},required:!0}),r.a.createElement("button",{type:"submit"},"Send Email")))})),Ie=a(62),Ue=a.n(Ie),Re=Object(i.b)((function(e){return{auth:e.auth}}),{setAlert:T})((function(e){var t=Object(n.useState)({password1:"",password2:""}),a=Object(P.a)(t,2),s=a[0],o=a[1],c=s.password1,i=s.password2,l=function(){var t=Object(N.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),c===i){t.next=3;break}return t.abrupt("return",e.setAlert("Password doesn't match","danger"));case 3:return t.prev=3,t.next=6,A.a.post("http://localhost:3000/api/users/resetPassword/".concat(e.match.params.resetToken),{newPassword:c});case 6:e.setAlert("Password has been successfully reset","success"),setTimeout((function(){e.history.push("/login")}),5e3),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.setAlert("Error resetting password","danger");case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}();return e.auth.isAuthenticated?r.a.createElement(u.a,{to:"/"}):r.a.createElement("div",{className:Ue.a.resetPassword},r.a.createElement("h1",null,"Enter new password"),r.a.createElement("form",{onSubmit:function(e){return l(e)}},r.a.createElement("input",{type:"password",name:"password1",value:s.password1,placeholder:"New Password",onChange:function(e){return o(Object(f.a)({},s,Object(ge.a)({},e.target.name,e.target.value)))},minLength:"6"}),r.a.createElement("input",{type:"password",name:"password2",value:s.password2,placeholder:" Confirm Password",onChange:function(e){return o(Object(f.a)({},s,Object(ge.a)({},e.target.name,e.target.value)))},minLength:"6"}),r.a.createElement("button",{type:"submit"},"Reset")))})),Ce=a(33),Pe=a.n(Ce),De=Object(i.b)((function(e){return{auth:e.auth}}),{updateUser:function(e){return function(){var t=Object(N.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I(localStorage.getItem("token")),t.prev=1,t.next=4,A.a.patch("/api/users",e);case 4:n=t.sent,a({type:"UPDATE_USER",payload:n.data}),a(T("Profile updated","success")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.response.data.errors.forEach((function(e){return a(T(e.msg,"danger"))}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.auth.user,a=Object(n.useRef)(),s=Object(n.useState)({name:"",email:"",avatar:""}),o=Object(P.a)(s,2),c=o[0],u=o[1];Object(n.useEffect)((function(){u(Object(f.a)({},c,{name:t.name,email:t.email,avatar:"/img/users/".concat(t.avatar)}))}),[]);var i=c.name,l=c.email;return console.log(Pe.a.profile),r.a.createElement("div",{className:Pe.a.profile},r.a.createElement("h1",null,"Edit user info"),r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault();var n=new FormData;n.append("name",i),n.append("email",l),n.append("photo",a.current.files[0]),e.updateUser(n)}(t)}},r.a.createElement("span",null,"Name:"),r.a.createElement("input",{type:"text",name:"name",value:c.name,placeholder:" Name",onChange:function(e){return u(Object(f.a)({},c,Object(ge.a)({},e.target.name,e.target.value)))}}),r.a.createElement("span",null,"Email:"),r.a.createElement("input",{type:"email",name:"email",value:c.email,placeholder:" Email",onChange:function(e){return u(Object(f.a)({},c,Object(ge.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{type:"file",name:"photo",id:"photo",accept:"image/*",ref:a,style:{display:"none"},onChange:function(e){u(Object(f.a)({},c,{avatar:URL.createObjectURL(e.target.files[0])})),console.log(URL.createObjectURL(e.target.files[0]))}}),r.a.createElement("label",{htmlFor:"photo"},"Choose new photo"),r.a.createElement("img",{src:c.avatar,alt:"avatar"}),r.a.createElement("button",{type:"submit"},"Save")))}));var Fe=function(e){return Object(n.useEffect)((function(){y.dispatch(U())}),[]),r.a.createElement(i.a,{store:y},r.a.createElement(c.a,null,r.a.createElement(L,null),r.a.createElement("section",{className:"container"},r.a.createElement(Ae,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:ne}),r.a.createElement(u.b,{exact:!0,path:"/signup",component:Oe}),r.a.createElement(u.b,{exact:!0,path:"/login",component:je}),r.a.createElement(u.b,{exact:!0,path:"/forgotPassword",component:Te}),r.a.createElement(u.b,{exact:!0,path:"/resetPassword/:resetToken",component:Re}),r.a.createElement(C,{exact:!0,path:"/questions/:id",component:he}),r.a.createElement(C,{exact:!0,path:"/profile",component:De}))),r.a.createElement("footer",null,r.a.createElement("p",null,"\xa9 2020 Roman Shishkin"),r.a.createElement("p",null,"roman.shishkin87@gmail.com"))))};o.a.render(r.a.createElement(Fe,null),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.83018de6.chunk.js.map